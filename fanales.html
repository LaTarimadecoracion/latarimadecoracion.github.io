<!DOCTYPE html>
<html lang="es">
<head>
	<!-- Google Tag Manager -->
	<script>
	(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-WN384RL2');
	</script>
	<!-- End Google Tag Manager -->
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WN384RL2"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Fanales | LA TARIMA</title>
	<link rel="stylesheet" href="estilos.css">
	<link rel="icon" href="img/ico.png" type="image/png">
</head>
<body class="barandas">
	<div class="container">
		<a href="index.html" style="text-decoration:none; color:inherit;">
			<h1 style="cursor:pointer;">LA TARIMA</h1>
		</a>
		<a href="index.html" style="text-decoration:none; color:inherit;">
			<div class="subtitle" style="cursor:pointer;">Carpintería Online</div>
		</a>
		<!-- BLOQUE DE REDES (INICIO) — botones grises de redes -->
		<div class="socials">
			<a href="https://www.tiktok.com/@latarimadecoracion" target="_blank" rel="noopener" aria-label="TikTok">
				<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 3c.3 2 1.7 3.6 3.6 3.9.3 0 .4.2.4.4v2.2c0 .3-.2.5-.5.5-1.7 0-3.3-.6-4.5-1.6v6.6c0 3-2.4 5.5-5.4 5.7-3.2.2-5.9-2.4-5.9-5.6 0-3.1 2.5-5.6 5.6-5.6.4 0 .8 0 1.1.1.2 0 .3.2.3.4v2.3c0 .2-.2.4-.4.4-.3-.1-.6-.1-.9-.1-1.6 0-2.9 1.4-2.8 3 .1 1.5 1.4 2.7 3 2.7 1.6 0 2.9-1.3 2.9-2.9V3.5c0-.3.2-.5.5-.5H16z"/></svg>
			</a>
			<a href="https://www.instagram.com/latarimadecoracion" target="_blank" rel="noopener" aria-label="Instagram">
				<svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="5" ry="5"></rect><circle cx="12" cy="12" r="4"></circle><circle cx="17" cy="7" r="1.5"></circle></svg>
			</a>
			<a href="https://www.facebook.com/latarimadecoracion" target="_blank" rel="noopener" aria-label="Facebook">
				<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 22v-9h3l.5-3H13V8.5c0-.9.3-1.5 1.7-1.5H16V4.3c-.3 0-1.2-.1-2.2-.1-2.2 0-3.8 1.3-3.8 3.9V10H7v3h3v9h3z"/></svg>
			</a>
			<a href="https://www.youtube.com/@latarimadecoracion" target="_blank" rel="noopener" aria-label="YouTube">
				<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M23.5 7.2c-.3-1.2-1.2-2.1-2.4-2.4C19 4.3 12 4.3 12 4.3s-7 0-9.1.5C1.7 5.1.8 6 .5 7.2.1 9.3.1 12 .1 12s0 2.7.4 4.8c.3 1.2 1.2 2.1 2.4 2.4C5 19.7 12 19.7 12 19.7s7 0 9.1-.5c1.2-.3 2.1-1.2 2.4-2.4.4-2.1.4-4.8.4-4.8s0-2.7-.4-4.8zM9.8 15.5V8.5l6 3.5-6 3.5z"/></svg>
			</a>
			<a href="https://wa.me/5491167007723" target="_blank" rel="noopener" aria-label="WhatsApp">
				<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"/></svg>
			</a>
		</div>
		<div class="product-stack" id="product-stack"></div>
		<!-- CTA fusionado: [INICIO | CONSULTAR] -->
		<nav class="split-btn" aria-label="Acciones de navegación y contacto">
			<a href="index.html" title="Volver al inicio">INICIO</a>
			<a href="https://wa.me/5491167007723" class="consultar" target="_blank" rel="noopener" title="Consultar por WhatsApp">CONSULTAR</a>
		</nav>
	</div>
	<script type="module">
	const moduleId = 'fanales';
	const whatsapp = 'https://wa.me/5491167007723';
	const IMAGES = {
		'Fanales': 'img/fanales/fanales.jpg'
	};
	function getModeloKey(modelo) {
		return modelo;
	}
	async function getLinks(){
		try {
			const res = await fetch('Links/links.json', { cache: 'no-store' });
			if(res.ok){
				const json = await res.json();
				return Array.isArray(json.modules[moduleId]) ? json.modules[moduleId] : [];
			}
		} catch(e){
			console.error('Error al cargar links.json', e);
		}
		return [];
	}
	function groupByModelo(rows) {
		const grupos = {};
		rows.forEach(row => {
			const key = getModeloKey(row.modelo);
			if (!grupos[key]) grupos[key] = [];
			grupos[key].push(row);
		});
		return grupos;
	}
	function renderCards(grupos) {
		const stack = document.getElementById('product-stack');
		stack.innerHTML = '';
		// Un solo card para todos los fanales
		let individuales = [];
		let combos = [];
		Object.values(grupos).forEach(items => {
			individuales.push(...items.filter(i => ['1un','2un','3un'].includes((i.tipo||'').toLowerCase())));
			combos.push(...items.filter(i => ['10un','20un','30un'].includes((i.tipo||'').toLowerCase())));
		});
		// Agrupar individuales por modelo
		const modelosInd = {};
		individuales.forEach(item => {
			const modelo = item.modelo || '';
			const tipo = item.tipo || '';
			if (!modelosInd[modelo]) modelosInd[modelo] = {};
			modelosInd[modelo][tipo] = item.href;
		});
		// Agrupar combos por modelo
		const modelosCombo = {};
		combos.forEach(item => {
			const modelo = item.modelo || '';
			const tipo = item.tipo || '';
			if (!modelosCombo[modelo]) modelosCombo[modelo] = {};
			modelosCombo[modelo][tipo] = item.href;
		});
	// Crear card único con fondo blanco
	const card = document.createElement('div');
	card.className = 'product-card';
	card.innerHTML = `
			<div class="product-image">
				<img src="${IMAGES['Fanales']}" alt="Fanales" loading="lazy">
			</div>
			<div class="product-card-title">Fanales</div>
			<table class="product-table">
				<tr>
					<th>Modelo</th>
					<th>1un</th>
					<th>2un</th>
					<th>3un</th>
				</tr>
				${Object.entries(modelosInd).map(([modelo, tipos]) => `
					<tr>
						<td>${modelo}</td>
						<td><a class="buy-btn${tipos['1un'] && tipos['1un'].trim() && tipos['1un'] !== '#' ? ' primary' : ' loading-link'}" href="${tipos['1un'] && tipos['1un'].trim() && tipos['1un'] !== '#' ? tipos['1un'] : '#'}"${tipos['1un'] && tipos['1un'].trim() && tipos['1un'] !== '#' ? ' target=\"_blank\" rel=\"noopener\"' : ' tabindex=\"-1\"'}>${tipos['1un'] && tipos['1un'].trim() && tipos['1un'] !== '#' ? 'Comprar' : ''}</a></td>
						<td><a class="buy-btn${tipos['2un'] && tipos['2un'].trim() && tipos['2un'] !== '#' ? ' primary' : ' loading-link'}" href="${tipos['2un'] && tipos['2un'].trim() && tipos['2un'] !== '#' ? tipos['2un'] : '#'}"${tipos['2un'] && tipos['2un'].trim() && tipos['2un'] !== '#' ? ' target=\"_blank\" rel=\"noopener\"' : ' tabindex=\"-1\"'}>${tipos['2un'] && tipos['2un'].trim() && tipos['2un'] !== '#' ? 'Comprar' : ''}</a></td>
						<td><a class="buy-btn${tipos['3un'] && tipos['3un'].trim() && tipos['3un'] !== '#' ? ' primary' : ' loading-link'}" href="${tipos['3un'] && tipos['3un'].trim() && tipos['3un'] !== '#' ? tipos['3un'] : '#'}"${tipos['3un'] && tipos['3un'].trim() && tipos['3un'] !== '#' ? ' target=\"_blank\" rel=\"noopener\"' : ' tabindex=\"-1\"'}>${tipos['3un'] && tipos['3un'].trim() && tipos['3un'] !== '#' ? 'Comprar' : ''}</a></td>
					</tr>
				`).join('')}
			</table>
			<div class="product-card-title" style="margin-top:16px; font-size:0.95rem; font-weight:600;">Combos mayoristas</div>
			<table class="product-table">
				<tr>
					<th>Modelo</th>
					<th>10un</th>
					<th>20un</th>
					<th>30un</th>
				</tr>
				${Object.entries(modelosCombo).map(([modelo, tipos]) => `
					<tr>
						<td>${modelo}</td>
						<td><a class="buy-btn${tipos['10un'] && tipos['10un'].trim() && tipos['10un'] !== '#' ? ' primary' : ' loading-link'}" href="${tipos['10un'] && tipos['10un'].trim() && tipos['10un'] !== '#' ? tipos['10un'] : '#'}"${tipos['10un'] && tipos['10un'].trim() && tipos['10un'] !== '#' ? ' target=\"_blank\" rel=\"noopener\"' : ' tabindex=\"-1\"'}>${tipos['10un'] && tipos['10un'].trim() && tipos['10un'] !== '#' ? 'Comprar' : ''}</a></td>
						<td><a class="buy-btn${tipos['20un'] && tipos['20un'].trim() && tipos['20un'] !== '#' ? ' primary' : ' loading-link'}" href="${tipos['20un'] && tipos['20un'].trim() && tipos['20un'] !== '#' ? tipos['20un'] : '#'}"${tipos['20un'] && tipos['20un'].trim() && tipos['20un'] !== '#' ? ' target=\"_blank\" rel=\"noopener\"' : ' tabindex=\"-1\"'}>${tipos['20un'] && tipos['20un'].trim() && tipos['20un'] !== '#' ? 'Comprar' : ''}</a></td>
						<td><a class="buy-btn${tipos['30un'] && tipos['30un'].trim() && tipos['30un'] !== '#' ? ' primary' : ' loading-link'}" href="${tipos['30un'] && tipos['30un'].trim() && tipos['30un'] !== '#' ? tipos['30un'] : '#'}"${tipos['30un'] && tipos['30un'].trim() && tipos['30un'] !== '#' ? ' target=\"_blank\" rel=\"noopener\"' : ' tabindex=\"-1\"'}>${tipos['30un'] && tipos['30un'].trim() && tipos['30un'] !== '#' ? 'Comprar' : ''}</a></td>
					</tr>
				`).join('')}
			</table>
		`;
		stack.appendChild(card);
	}
	(async () => {
		const links = await getLinks();
		const grupos = groupByModelo(links);
		renderCards(grupos);
	})();
	</script>
</body>
</html>
