<!DOCTYPE html>
<html lang="es">
<head>
				<!-- Google tag (gtag.js) -->
				<script async src="https://www.googletagmanager.com/gtag/js?id=G-JXNJV3XERK"></script>
				<script>
						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-JXNJV3XERK');
				</script>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Otros productos | LA TARIMA</title>
		<meta name="description" content="Otros productos de LA TARIMA: catálogo adicional con variantes y compras online.">
		<meta name="robots" content="index,follow">
		<link rel="canonical" href="https://latarimadecoracion.github.io/otros_productos.html">
		<!-- Open Graph / Twitter -->
		<meta property="og:title" content="Otros productos | LA TARIMA">
		<meta property="og:description" content="Catálogo adicional con opciones de compra.">
		<meta property="og:image" content="https://latarimadecoracion.github.io/img/base.png">
		<meta property="og:url" content="https://latarimadecoracion.github.io/otros_productos.html">
		<meta property="og:type" content="website">
		<meta property="og:locale" content="es_AR">
		<meta name="twitter:card" content="summary_large_image">
		<link rel="stylesheet" href="estilos.css?v=20251003">
		<link rel="icon" href="img/ico.png" type="image/png">
				<script type="application/ld+json">
{
	"@context": "https://schema.org",
	"@type": "BreadcrumbList",
	"itemListElement": [
		{"@type":"ListItem","position":1,"name":"Inicio","item":"https://latarimadecoracion.github.io/"},
		{"@type":"ListItem","position":2,"name":"Otros productos","item":"https://latarimadecoracion.github.io/otros_productos.html"}
	]
}
				</script>

</head>
<body class="barandas">
	<div class="container">
		<header class="site-header">
			<a href="index.html" aria-label="Ir al inicio"><h1>LA TARIMA</h1></a>
			<a href="index.html" aria-label="Ir al inicio"><div class="subtitle">Carpintería Online</div></a>
			<div class="socials">
				<a href="https://www.tiktok.com/@latarimadecoracion" target="_blank" rel="noopener" aria-label="TikTok">
					<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 3c.3 2 1.7 3.6 3.6 3.9.3 0 .4.2.4.4v2.2c0 .3-.2.5-.5.5-1.7 0-3.3-.6-4.5-1.6v6.6c0 3-2.4 5.5-5.4 5.7-3.2.2-5.9-2.4-5.9-5.6 0-3.1 2.5-5.6 5.6-5.6.4 0 .8 0 1.1.1.2 0 .3.2.3.4v2.3c0 .2-.2.4-.4.4-.3-.1-.6-.1-.9-.1-1.6 0-2.9 1.4-2.8 3 .1 1.5 1.4 2.7 3 2.7 1.6 0 2.9-1.3 2.9-2.9V3.5c0-.3.2-.5.5-.5H16z"/></svg>
				</a>
				<a href="https://www.instagram.com/latarimadecoracion" target="_blank" rel="noopener" aria-label="Instagram">
					<svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="5" ry="5"></rect><circle cx="12" cy="12" r="4"></circle><circle cx="17" cy="7" r="1.5"></circle></svg>
				</a>
				<a href="https://www.facebook.com/latarimadecoracion" target="_blank" rel="noopener" aria-label="Facebook">
					<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 22v-9h3l.5-3H13V8.5c0-.9.3-1.5 1.7-1.5H16V4.3c-.3 0-1.2-.1-2.2-.1-2.2 0-3.8 1.3-3.8 3.9V10H7v3h3v9h3z"/></svg>
				</a>
				<a href="https://www.youtube.com/@latarimadecoracion" target="_blank" rel="noopener" aria-label="YouTube">
					<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M23.5 7.2c-.3-1.2-1.2-2.1-2.4-2.4C19 4.3 12 4.3 12 4.3s-7 0-9.1.5C1.7 5.1.8 6 .5 7.2.1 9.3.1 12 .1 12s0 2.7.4 4.8c.3 1.2 1.2 2.1 2.4 2.4C5 19.7 12 19.7 12 19.7s7 0 9.1-.5c1.2-.3 2.1-1.2 2.4-2.4.4-2.1.4-4.8.4-4.8zM9.8 15.5V8.5l6 3.5-6 3.5z"/></svg>
				</a>
				<a href="https://wa.me/5491167007723" target="_blank" rel="noopener" aria-label="WhatsApp">
					<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884"/></svg>
				</a>
			</div>
		</header>


		<div class="product-stack" id="product-stack"></div>

		<nav class="split-btn" aria-label="Acciones de navegación y contacto">
			<a href="index.html" title="Volver al inicio">INICIO</a>
			<a href="https://wa.me/5491167007723" class="consultar" target="_blank" rel="noopener" title="Consultar por WhatsApp">CONSULTAR</a>
		</nav>
	</div>

	<script type="module">
	const moduleId = 'otros_productos';

	function normalizeText(s){
		return (s||'').toString().toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
	}
	function slugify(s){
		return normalizeText(s).replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
	}
	function parseMedidaToTuple(medida){
		if (typeof medida !== 'string' || !medida.trim()) return [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];
		const m2 = medida.match(/(\d+)\s*x\s*(\d+)/i);
		if (m2) return [parseInt(m2[1],10), parseInt(m2[2],10)];
		const m1 = medida.match(/(\d+)/); // soporta "10", "20", etc.
		if (m1) return [parseInt(m1[1],10), 0];
		return [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];
	}
	function uniqueSorted(arr){
		return Array.from(new Set(arr));
	}
	function parseCantidadTipo(t){
		if (typeof t !== 'string') return null;
		// Acepta "1un", "1 un" y también solo números "1"
		const m = t.match(/^(\d+)(?:\s*un)?$/i);
		return m ? parseInt(m[1],10) : null;
	}
	function orderTipos(tipos){
		// Si todos son cantidades, ordenar por número; si no, prioridad de acabados y luego alfabético
		const allCant = tipos.length && tipos.every(t => parseCantidadTipo(t) !== null);
		if (allCant) return tipos.sort((a,b)=>parseCantidadTipo(a)-parseCantidadTipo(b));
		const prio = ['natural','barnizado','barnizada','blanco','blanca','tintes'];
		return tipos.sort((a,b)=>{
			const na = normalizeText(a); const nb = normalizeText(b);
			const ia = prio.indexOf(na); const ib = prio.indexOf(nb);
			if (ia !== -1 || ib !== -1){
				if (ia === -1) return 1; if (ib === -1) return -1; return ia - ib;
			}
			return a.localeCompare(b);
		});
	}

	async function getModuleRows(){
		try{
			const res = await fetch('Links/links.json', { cache: 'no-store' });
			if(!res.ok) return [];
			const json = await res.json();
			const mod = json?.modules?.[moduleId];
			return Array.isArray(mod) ? mod : [];
		}catch(e){
			console.error('Error cargando links.json', e);
			return [];
		}
	}

	function groupByModelo(rows){
		const map = {};
		rows.forEach(r=>{
			const key = (r?.modelo||'Otros').toString();
			(map[key] ||= []).push(r);
		});
		return map;
	}

		function renderProductoCard(parent, modelo, items){
		const imgSrc = `img/otros_productos/${slugify(modelo)}.jpg`;
		// Filas = medidas, Columnas = tipos
			const medidas = uniqueSorted(items.map(i => (i.medida && i.medida.trim()) ? i.medida : 'Único'))
			.sort((a,b)=>{ const [aw,ah]=parseMedidaToTuple(a); const [bw,bh]=parseMedidaToTuple(b); if (aw!==bw) return aw-bw; if (ah!==bh) return ah-bh; return String(a).localeCompare(String(b)); });
			// Solo considerar tipos reales; ignorar tipos vacíos para no crear una columna extra
			const tiposRaw = uniqueSorted(items.map(i => i.tipo && i.tipo.trim()).filter(Boolean));
		const tipos = orderTipos(tiposRaw);
		// mapa medida→tipo→href (preferir href no vacío)
			const mapHref = new Map();
			items.forEach(i => {
				const med = (i.medida && i.medida.trim()) ? i.medida : 'Único';
				const tipo = (i.tipo && i.tipo.trim()) ? i.tipo : null;
				if (!tipo) return; // omitir items sin tipo para no generar columna vacía
				const href = i.href || '';
				const key = med + '||' + tipo;
				const exists = mapHref.get(key);
				if (!exists || (!exists.href && href)) {
					mapHref.set(key, { href, present: true });
				}
			});

		const card = document.createElement('div');
		card.className = 'product-card';
		card.innerHTML = `
			<div class="product-image">
				<img src="${imgSrc}" alt="${modelo}" loading="lazy" onerror="this.onerror=null;this.src='img/base.png'">
			</div>
			<div class="product-card-title">${modelo}</div>
				<table class="product-table">
					<thead>
						<tr>
							<th>Medida</th>
							${tipos.map(t => `<th>${t}</th>`).join('')}
						</tr>
					</thead>
					<tbody>
						${medidas.map((m, idx) => {
											const selectId = `select-${slugify(modelo)}-${idx}`;
											// Fila de escritorio con botones
											const desktopCells = tipos.map(t => {
												const entry = mapHref.get(m + '||' + t);
												const href = entry && entry.href ? entry.href : '';
												const btn = (href && href.trim() && href !== '#')
													? `<a class=\"buy-btn primary\" href=\"${href}\" target=\"_blank\" rel=\"noopener\">Comprar</a>`
													: `<span class=\"buy-btn loading-link\" tabindex=\"-1\"></span>`;
												return `<td data-label=\"${t}\">${btn}</td>`;
											}).join('');
											const desktopRow = `<tr class=\"desktop-row\"><td>${m}</td>${desktopCells}</tr>`;

											// Fila para móvil con select
											const opciones = tipos.map(t => {
												const entry = mapHref.get(m + '||' + t);
												const href = entry && entry.href ? entry.href : '';
												if (href && href.trim() && href !== '#') {
													return `<option value=\"${href}\">${t}</option>`;
												}
												return `<option value=\"\" disabled>${t} (Próximamente)</option>`;
											}).join('');
											const mobileRow = `
												<tr class=\"mobile-select-row\">
													<td colspan=\"${tipos.length + 1}\" style=\"text-align:center;\">
														<div style=\"font-weight:600;font-size:1.08em;margin-bottom:8px;\">${m}</div>
														<select id=\"${selectId}\" class=\"dropbtn\">
															<option value=\"\" selected disabled>Elegir opción</option>
															${opciones}
														</select>
													</td>
												</tr>
											`;

											return desktopRow + mobileRow;
										}).join('')}
					</tbody>
				</table>
		`;
		parent.appendChild(card);

		// Agregar listeners a los selects móviles de este card
		setTimeout(() => {
			const selects = card.querySelectorAll('.mobile-select-row select');
			selects.forEach(sel => {
				sel.addEventListener('change', function() {
					const url = this.value;
					if (url) window.open(url, '_blank');
					this.selectedIndex = 0;
				});
			});
		}, 0);
	}

	(async () => {
		const stackEl = document.getElementById('product-stack');
		// Aviso si se abre como file://
		if (location.protocol === 'file:') {
			stackEl.innerHTML = `
				<div style="background:#fff3cd;border:1px solid #ffeeba;color:#856404;padding:10px 12px;border-radius:8px;margin-bottom:10px;">
					Para ver los productos cargados en <code>Links/links.json</code>, abrí el sitio con un servidor local.
					Desde VS Code podés usar la tarea "Iniciar servidor local HTTP" y entrar a 
					<b>http://localhost:8000/otros_productos.html</b>.
				</div>
			`;
		}
		const rows = await getModuleRows();
		if (!rows.length) {
			stackEl.innerHTML += `<p style=\"text-align:center;opacity:.7\">Sin productos por ahora. Agregá filas en el módulo <code>${moduleId}</code> dentro de Links/links.json</p>`;
			return;
		}
		const grupos = groupByModelo(rows);
		const modelos = Object.keys(grupos).sort((a,b)=>a.localeCompare(b));
		modelos.forEach(modelo => renderProductoCard(stackEl, modelo, grupos[modelo]));
	})();
	</script>
</body>
</html>

